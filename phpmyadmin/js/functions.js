var $table_clone=false;var sql_box_locked=false;var only_once_elements=[];var ajax_message_count=0;var codemirror_editor=false;var codemirror_inline_editor=false;var chart_activeTimeouts={};$.ajaxPrefilter(function(a,d,c){var b=new Date().getTime()+""+Math.floor(Math.random()*1000000);if(typeof a.data=="string"){a.data+="&_nocache="+b}else{if(typeof a.data=="object"){a.data=$.extend(d.data,{_nocache:b})}}});function PMA_prepareForAjaxRequest(a){if(!a.find("input:hidden").is("#ajax_request_hidden")){a.append('<input type="hidden" id="ajax_request_hidden" name="ajax_request" value="true" />')}}function suggestPassword(a){var d="abcdefhjmnpqrstuvwxyz23456789ABCDEFGHJKLMNPQRSTUVWYXZ";var e=16;var b=a.generated_pw;b.value="";for(var c=0;c<e;c++){b.value+=d.charAt(Math.floor(Math.random()*d.length))}a.text_pma_pw.value=b.value;a.text_pma_pw2.value=b.value;return true}function parseVersionString(h){if(typeof(h)!="string"){return false}var g=0;var f=h.split("-");if(f.length>=2){if(f[1].substr(0,2)=="rc"){g=-20-parseInt(f[1].substr(2))}else{if(f[1].substr(0,4)=="beta"){g=-40-parseInt(f[1].substr(4))}else{if(f[1].substr(0,5)=="alpha"){g=-60-parseInt(f[1].substr(5))}else{if(f[1].substr(0,3)=="dev"){g=0}}}}}var a=h.split(".");var c=parseInt(a[0])||0;var d=parseInt(a[1])||0;var b=parseInt(a[2])||0;var e=parseInt(a[3])||0;return c*100000000+d*1000000+b*10000+e*100+g}function PMA_current_version(d){if(d&&d.version&&d.date){var e=parseVersionString(pmaversion);var b=parseVersionString(d.version);var f=PMA_messages.strLatestAvailable+" "+escapeHtml(d.version);if(b>e){var c=$.sprintf(PMA_messages.strNewerVersion,escapeHtml(d.version),escapeHtml(d.date));if(Math.floor(b/10000)===Math.floor(e/10000)){var a="error"}else{var a="notice"}$("#maincontainer").after('<div class="'+a+'">'+c+"</div>")}if(b===e){f=" ("+PMA_messages.strUpToDate+")"}$("#li_pma_version").append(f)}}function PMA_display_git_revision(){$("#is_git_revision").remove();$.get("index.php",{server:PMA_commonParams.get("server"),token:PMA_commonParams.get("token"),git_revision:true,ajax_request:true},function(a){if(a.success==true){$(a.message).insertAfter("#li_pma_version")}})}function displayPasswordGenerateButton(){$("#tr_element_before_generate_password").parent().append('<tr class="vmiddle"><td>'+PMA_messages.strGeneratePassword+'</td><td><input type="button" class="button" id="button_generate_password" value="'+PMA_messages.strGenerate+'" onclick="suggestPassword(this.form)" /><input type="text" name="generated_pw" id="generated_pw" /></td></tr>');$("#div_element_before_generate_password").parent().append('<div class="item"><label for="button_generate_password">'+PMA_messages.strGeneratePassword+':</label><span class="options"><input type="button" class="button" id="button_generate_password" value="'+PMA_messages.strGenerate+'" onclick="suggestPassword(this.form)" /></span><input type="text" name="generated_pw" id="generated_pw" /></div>')}function PMA_addDatepicker(d,b){var c=false;if(d.is(".datetimefield")){c=true}var a={showOn:"button",buttonImage:themeCalendarImage,buttonImageOnly:true,stepMinutes:1,stepHours:1,showSecond:true,showTimepicker:c,showButtonPanel:false,dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",altFieldTimeOnly:false,showAnim:"",beforeShow:function(e,f){d.data("comes_from","datepicker");setTimeout(function(){$("#ui-timepicker-div").css("z-index",$("#ui-datepicker-div").css("z-index"))},0)},onClose:function(f,e){d.data("comes_from","")}};if(c||(typeof(b)!="undefined"&&b.showTimepicker)){d.datetimepicker($.extend(a,b))}else{d.datepicker($.extend(a,b))}}function selectContent(b,a,c){if(c&&only_once_elements[b.name]){return}only_once_elements[b.name]=true;if(a){return}b.select()}function confirmLink(d,b){if(PMA_messages.strDoYouReally==""||typeof(window.opera)!="undefined"){return true}var a=confirm($.sprintf(PMA_messages.strDoYouReally,b));if(a){if($(d).hasClass("formLinkSubmit")){var c="is_js_confirmed";if($(d).attr("href").indexOf("usesubform")!=-1){c="subform["+$(d).attr("href").substr("#").match(/usesubform\[(\d+)\]/i)[1]+"][is_js_confirmed]"}$(d).parents("form").append('<input type="hidden" name="'+c+'" value="1" />')}else{if(typeof(d.href)!="undefined"){d.href+="&is_js_confirmed=1"}else{if(typeof(d.form)!="undefined"){d.form.action+="?is_js_confirmed=1"}}}}return a}function confirmQuery(d,e){if(PMA_messages.strDoYouReally==""){return true}if(PMA_messages.strNoDropDatabases!=""){var f=new RegExp("(^|;)\\s*DROP\\s+(IF EXISTS\\s+)?DATABASE\\s","i");if(f.test(e.value)){alert(PMA_messages.strNoDropDatabases);d.reset();e.focus();return false}}var b=new RegExp("^\\s*DROP\\s+(IF EXISTS\\s+)?(TABLE|DATABASE|PROCEDURE)\\s","i");var a=new RegExp("^\\s*ALTER\\s+TABLE\\s+((`[^`]+`)|([A-Za-z0-9_$]+))\\s+DROP\\s","i");var h=new RegExp("^\\s*DELETE\\s+FROM\\s","i");var g=new RegExp("^\\s*TRUNCATE\\s","i");if(b.test(e.value)||a.test(e.value)||h.test(e.value)||g.test(e.value)){var i=(e.value.length>100)?e.value.substr(0,100)+"\n    ...":e.value;var c=confirm($.sprintf(PMA_messages.strDoYouReally,i));if(c){d.elements.is_js_confirmed.value=1;return true}else{window.focus();e.focus();return false}}return true}function checkSqlQuery(d){if(codemirror_editor){d.elements.sql_query.value=codemirror_editor.getValue()}var b=d.elements.sql_query;var c=1;var a=new RegExp("\\s+");if(typeof(d.elements.sql_file)!="undefined"&&d.elements.sql_file.value.replace(a,"")!=""){return true}if(typeof(d.elements.sql_localfile)!="undefined"&&d.elements.sql_localfile.value.replace(a,"")!=""){return true}if(c&&typeof(d.elements.id_bookmark)!="undefined"&&(d.elements.id_bookmark.value!=null||d.elements.id_bookmark.value!="")&&d.elements.id_bookmark.selectedIndex!=0){return true}if(b.value.replace(a,"")!=""){if(confirmQuery(d,b)){return true}else{return false}}d.reset();c=1;if(c){b.select();alert(PMA_messages.strFormEmpty);b.focus();return false}return true}function emptyCheckTheField(d,b){var a=d.elements[b];var c=new RegExp("\\s+");return(a.value.replace(c,"")=="")?1:0}function emptyFormElements(d,b){var a=d.elements[b];var c=emptyCheckTheField(d,b);return c}function checkFormElementInRange(g,d,e,c,b){var a=g.elements[d];var f=parseInt(a.value);if(typeof(c)=="undefined"){c=0}if(typeof(b)=="undefined"){b=Number.MAX_VALUE}if(isNaN(f)){a.select();alert(PMA_messages.strNotNumber);a.focus();return false}else{if(f<c||f>b){a.select();alert($.sprintf(e,f));a.focus();return false}else{a.value=f}}return true}function checkTableEditForm(g,j){var f=0;var e,h,a,k,d,c;for(e=0;e<j;e++){c="#field_"+e+"_2";h=$(c);d=h.val();if(d=="VARCHAR"||d=="CHAR"||d=="BIT"||d=="VARBINARY"||d=="BINARY"){a=$("#field_"+e+"_3");d=parseInt(a.val());k=$("#field_"+e+"_1");if(isNaN(d)&&k.val()!=""){a.select();alert(PMA_messages.strNotNumber);a.focus();return false}}if(f==0){c="field_"+e+"_1";if(!emptyCheckTheField(g,c)){f=1}}}if(f==0){var b=g.elements.field_0_1;alert(PMA_messages.strFormEmpty);b.focus();return false}if($("input.textfield[name='table']").val()==""){alert(PMA_messages.strFormEmpty);$("input.textfield[name='table']").focus();return false}return true}AJAX.registerTeardown("functions.js",function(){$("input:checkbox.checkall").die("click")});AJAX.registerOnload("functions.js",function(){$("input:checkbox.checkall").live("click",function(g){var d=$(this).closest("tr");if(!g.shiftKey||last_clicked_row==-1){var b=d.find(":checkbox");if(b.length){var c=b.prop("checked");if(!$(g.target).is(":checkbox, label")){c=!c;b.prop("checked",c).trigger("change")}if(c){d.addClass("marked")}else{d.removeClass("marked")}last_click_checked=c}else{d.toggleClass("marked");last_click_checked=false}last_clicked_row=last_click_checked?$("tr.odd:not(.noclick), tr.even:not(.noclick)").index(d):-1;last_shift_clicked_row=-1}else{PMA_clearSelection();var h,a;if(last_shift_clicked_row>=0){if(last_shift_clicked_row>=last_clicked_row){h=last_clicked_row;a=last_shift_clicked_row}else{h=last_shift_clicked_row;a=last_clicked_row}d.parent().find("tr.odd:not(.noclick), tr.even:not(.noclick)").slice(h,a+1).removeClass("marked").find(":checkbox").prop("checked",false).trigger("change")}var f=$("tr.odd:not(.noclick), tr.even:not(.noclick)").index(d);if(f>=last_clicked_row){h=last_clicked_row;a=f}else{h=f;a=last_clicked_row}d.parent().find("tr.odd:not(.noclick), tr.even:not(.noclick)").slice(h,a+1).addClass("marked").find(":checkbox").prop("checked",true).trigger("change");last_shift_clicked_row=f}});addDateTimePicker();if(navigator.userAgent.match(/(iphone|ipod|ipad)/i)){$("input[type=text]").attr("autocapitalize","off").attr("autocorrect","off")}});var last_click_checked=false;var last_clicked_row=-1;var last_shift_clicked_row=-1;var marked_row=[];function markAllRows(a){$("#"+a).find("input:checkbox:enabled").prop("checked",true).trigger("change").parents("tr").addClass("marked");return true}function unMarkAllRows(a){$("#"+a).find("input:checkbox:enabled").prop("checked",false).trigger("change").parents("tr").removeClass("marked");return true}function setCheckboxes(b,a){$("#"+b).find("input:checkbox").prop("checked",a);return true}function setSelectOptions(b,a,c){$("form[name='"+b+"'] select[name='"+a+"']").find("option").prop("selected",c);return true}function setQuery(a){if(codemirror_editor){codemirror_editor.setValue(a);codemirror_editor.focus()}else{document.sqlform.sql_query.value=a;document.sqlform.sql_query.focus()}}function insertQuery(c){if(c=="clear"){setQuery("");return}var f="";var a=document.sqlform.dummy;var h=document.sqlform.table.value;if(a.options.length>0){sql_box_locked=true;var b="";var g="";var e="";var j=0;for(var d=0;d<a.options.length;d++){j++;if(j>1){b+=", ";g+=",";e+=","}b+=a.options[d].value;g+="[value-"+j+"]";e+=a.options[d].value+"=[value-"+j+"]"}if(c=="selectall"){f="SELECT * FROM `"+h+"` WHERE 1"}else{if(c=="select"){f="SELECT "+b+" FROM `"+h+"` WHERE 1"}else{if(c=="insert"){f="INSERT INTO `"+h+"`("+b+") VALUES ("+g+")"}else{if(c=="update"){f="UPDATE `"+h+"` SET "+e+" WHERE 1"}else{if(c=="delete"){f="DELETE FROM `"+h+"` WHERE 1"}}}}}setQuery(f);sql_box_locked=false}}function insertValueQuery(){var h=document.sqlform.sql_query;var d=document.sqlform.dummy;if(d.options.length>0){sql_box_locked=true;var e="";var j=0;for(var f=0;f<d.options.length;f++){if(d.options[f].selected){j++;if(j>1){e+=", "}e+=d.options[f].value}}if(codemirror_editor){codemirror_editor.replaceSelection(e)}else{if(document.selection){h.focus();var c=document.selection.createRange();c.text=e;document.sqlform.insert.focus()}else{if(document.sqlform.sql_query.selectionStart||document.sqlform.sql_query.selectionStart=="0"){var g=document.sqlform.sql_query.selectionStart;var b=document.sqlform.sql_query.selectionEnd;var a=document.sqlform.sql_query.value;h.value=a.substring(0,g)+e+a.substring(b,a.length)}else{h.value+=e}}}sql_box_locked=false}}function addDateTimePicker(){if($.timepicker!=undefined){$("input.datefield, input.datetimefield").each(function(){PMA_addDatepicker($(this))})}}function refreshLayout(){var c=$("#pdflayout");var d=$("#orientation_opt").val();if($("#paper_opt").length==1){var e=$("#paper_opt").val()}else{var e="A4"}if(d=="P"){var b="x";var a="y"}else{var b="y";var a="x"}c.css("width",pdfPaperSize(e,b)+"px");c.css("height",pdfPaperSize(e,a)+"px")}function TableDragInit(){$(".pdflayout_table").each(function(){var c=$(this);var b=c.data("number");var a=$("#c_table_"+b+"_x").val();var d=$("#c_table_"+b+"_y").val();c.css("left",a+"px");c.css("top",d+"px");c.draggable({containment:"parent",drag:function(e,g){var f=c.data("number");$("#c_table_"+f+"_x").val(parseInt(g.position.left));$("#c_table_"+f+"_y").val(parseInt(g.position.top))}})})}function resetDrag(){$(".pdflayout_table").each(function(){var b=$(this);var a=b.data("x");var c=b.data("y");b.css("left",a+"px");b.css("top",c+"px")})}$(function(){$(".position-change").live("change",function(){var b=$(this);var a=$("#table_"+b.data("number"));a.css(b.data("axis"),b.val()+"px")});$(".paper-change").live("change",function(){var a=$("#pdflayout");if(a.css("visibility")=="visible"){refreshLayout();TableDragInit()}});$("#toggle-dragdrop").live("click",function(){var a=$("#pdflayout");if(a.css("visibility")=="hidden"){refreshLayout();TableDragInit();a.css("visibility","visible");a.css("display","block");$("#showwysiwyg").val("1")}else{a.css("visibility","hidden");a.css("display","none");$("#showwysiwyg").val("0")}});$("#reset-dragdrop").live("click",function(){resetDrag()})});function pdfPaperSize(b,a){switch(b.toUpperCase()){case"4A0":if(a=="x"){return 4767.87}else{return 6740.79}break;case"2A0":if(a=="x"){return 3370.39}else{return 4767.87}break;case"A0":if(a=="x"){return 2383.94}else{return 3370.39}break;case"A1":if(a=="x"){return 1683.78}else{return 2383.94}break;case"A2":if(a=="x"){return 1190.55}else{return 1683.78}break;case"A3":if(a=="x"){return 841.89}else{return 1190.55}break;case"A4":if(a=="x"){return 595.28}else{return 841.89}break;case"A5":if(a=="x"){return 419.53}else{return 595.28}break;case"A6":if(a=="x"){return 297.64}else{return 419.53}break;case"A7":if(a=="x"){return 209.76}else{return 297.64}break;case"A8":if(a=="x"){return 147.4}else{return 209.76}break;case"A9":if(a=="x"){return 104.88}else{return 147.4}break;case"A10":if(a=="x"){return 73.7}else{return 104.88}break;case"B0":if(a=="x"){return 2834.65}else{return 4008.19}break;case"B1":if(a=="x"){return 2004.09}else{return 2834.65}break;case"B2":if(a=="x"){return 1417.32}else{return 2004.09}break;case"B3":if(a=="x"){return 1000.63}else{return 1417.32}break;case"B4":if(a=="x"){return 708.66}else{return 1000.63}break;case"B5":if(a=="x"){return 498.9}else{return 708.66}break;case"B6":if(a=="x"){return 354.33}else{return 498.9}break;case"B7":if(a=="x"){return 249.45}else{return 354.33}break;case"B8":if(a=="x"){return 175.75}else{return 249.45}break;case"B9":if(a=="x"){return 124.72}else{return 175.75}break;case"B10":if(a=="x"){return 87.87}else{return 124.72}break;case"C0":if(a=="x"){return 2599.37}else{return 3676.54}break;case"C1":if(a=="x"){return 1836.85}else{return 2599.37}break;case"C2":if(a=="x"){return 1298.27}else{return 1836.85}break;case"C3":if(a=="x"){return 918.43}else{return 1298.27}break;case"C4":if(a=="x"){return 649.13}else{return 918.43}break;case"C5":if(a=="x"){return 459.21}else{return 649.13}break;case"C6":if(a=="x"){return 323.15}else{return 459.21}break;case"C7":if(a=="x"){return 229.61}else{return 323.15}break;case"C8":if(a=="x"){return 161.57}else{return 229.61}break;case"C9":if(a=="x"){return 113.39}else{return 161.57}break;case"C10":if(a=="x"){return 79.37}else{return 113.39}break;case"RA0":if(a=="x"){return 2437.8}else{return 3458.27}break;case"RA1":if(a=="x"){return 1729.13}else{return 2437.8}break;case"RA2":if(a=="x"){return 1218.9}else{return 1729.13}break;case"RA3":if(a=="x"){return 864.57}else{return 1218.9}break;case"RA4":if(a=="x"){return 609.45}else{return 864.57}break;case"SRA0":if(a=="x"){return 2551.18}else{return 3628.35}break;case"SRA1":if(a=="x"){return 1814.17}else{return 2551.18}break;case"SRA2":if(a=="x"){return 1275.59}else{return 1814.17}break;case"SRA3":if(a=="x"){return 907.09}else{return 1275.59}break;case"SRA4":if(a=="x"){return 637.8}else{return 907.09}break;case"LETTER":if(a=="x"){return 612}else{return 792}break;case"LEGAL":if(a=="x"){return 612}else{return 1008}break;case"EXECUTIVE":if(a=="x"){return 521.86}else{return 756}break;case"FOLIO":if(a=="x"){return 612}else{return 936}break}return 0}AJAX.registerTeardown("functions.js",function(){$("a.inline_edit_sql").die("click");$("input#sql_query_edit_save").die("click");$("input#sql_query_edit_discard").die("click");$("input.sqlbutton").unbind("click");$("#export_type").unbind("change");$("#sqlquery").unbind("keydown");$("#sql_query_edit").unbind("keydown");if(codemirror_inline_editor){$("#sql_query_edit").text(codemirror_inline_editor.getValue());$(codemirror_inline_editor.getWrapperElement()).unbind("keydown");codemirror_inline_editor.toTextArea();codemirror_inline_editor=false}if(codemirror_editor){$(codemirror_editor.getWrapperElement()).unbind("keydown")}});AJAX.registerOnload("functions.js",function(){bindCodeMirrorToInlineEditor();$("a.inline_edit_sql").live("click",function(){if($("#sql_query_edit").length){return false}var a=$(this).prev("form");var f=a.find("input[name='sql_query']").val();var e=$(this).parent().prev().find(".inner_sql");var d=e.html();var c='<textarea name="sql_query_edit" id="sql_query_edit">'+f+"</textarea>\n";c+='<input type="submit" id="sql_query_edit_save" class="button btnSave" value="'+PMA_messages.strGo+'"/>\n';c+='<input type="button" id="sql_query_edit_discard" class="button btnDiscard" value="'+PMA_messages.strCancel+'"/>\n';var b=$("div#inline_editor");if(b.length==0){b=$('<div id="inline_editor_outer"></div>');b.insertBefore(e)}b.html(c);e.hide();bindCodeMirrorToInlineEditor();return false});$("input#sql_query_edit_save").live("click",function(){if(codemirror_inline_editor){var b=codemirror_inline_editor.getValue()}else{var b=$(this).prev().val()}var a=$("a.inline_edit_sql").prev("form");var c=$("<form>",{action:"import.php",method:"post"}).append(a.find("input[name=server], input[name=db], input[name=table], input[name=token]").clone()).append($("<input/>",{type:"hidden",name:"show_query",value:1})).append($("<input/>",{type:"hidden",name:"sql_query",value:b}));c.appendTo($("body")).submit()});$("input#sql_query_edit_discard").live("click",function(){$("div#inline_editor_outer").empty().siblings(".inner_sql").show()});$("input.sqlbutton").click(function(a){insertQuery(a.target.id);return false});$("#export_type").change(function(){if($("#export_type").val()=="svg"){$("#show_grid_opt").prop("disabled",true);$("#orientation_opt").prop("disabled",true);$("#with_doc").prop("disabled",true);$("#show_table_dim_opt").removeProp("disabled");$("#all_tables_same_width").removeProp("disabled");$("#paper_opt").removeProp("disabled");$("#show_color_opt").removeProp("disabled")}else{if($("#export_type").val()=="dia"){$("#show_grid_opt").prop("disabled",true);$("#with_doc").prop("disabled",true);$("#show_table_dim_opt").prop("disabled",true);$("#all_tables_same_width").prop("disabled",true);$("#paper_opt").removeProp("disabled");$("#show_color_opt").removeProp("disabled");$("#orientation_opt").removeProp("disabled")}else{if($("#export_type").val()=="eps"){$("#show_grid_opt").prop("disabled",true);$("#orientation_opt").removeProp("disabled");$("#with_doc").prop("disabled",true);$("#show_table_dim_opt").prop("disabled",true);$("#all_tables_same_width").prop("disabled",true);$("#paper_opt").prop("disabled",true);$("#show_color_opt").prop("disabled",true)}else{if($("#export_type").val()=="pdf"){$("#show_grid_opt").removeProp("disabled");$("#orientation_opt").removeProp("disabled");$("#with_doc").removeProp("disabled");$("#show_table_dim_opt").removeProp("disabled");$("#all_tables_same_width").removeProp("disabled");$("#paper_opt").removeProp("disabled");$("#show_color_opt").removeProp("disabled")}else{}}}}});if($("#input_username")){if($("#input_username").val()==""){$("#input_username").focus()}else{$("#input_password").focus()}}});function bindCodeMirrorToInlineEditor(){var b=$("#sql_query_edit");if(b.length>0){if(typeof CodeMirror!=="undefined"){var a=$("#sql_query_edit").css("height");codemirror_inline_editor=CodeMirror.fromTextArea(b[0],{lineNumbers:true,matchBrackets:true,indentUnit:4,mode:"text/x-mysql",lineWrapping:true});codemirror_inline_editor.getScrollerElement().style.height=a;codemirror_inline_editor.refresh();codemirror_inline_editor.focus();$(codemirror_inline_editor.getWrapperElement()).bind("keydown",catchKeypressesFromSqlTextboxes)}else{b.focus().bind("keydown",catchKeypressesFromSqlTextboxes)}}}function catchKeypressesFromSqlTextboxes(a){if(a.ctrlKey&&(a.keyCode==13||a.keyCode==10)){if($("#sql_query_edit").length>0){$("#sql_query_edit_save").trigger("click")}else{if($("#sqlquery").length>0){$("#button_submit_query").trigger("click")}}}}function PMA_ajaxShowMessage(c,d){var b=true;var e=true;if(c==""){return true}else{if(!c){c=PMA_messages.strLoading;e=false;b=false}else{if(c==PMA_messages.strProcessingRequest){e=false;b=false}}}if(d==undefined){d=5000}else{if(d===false){b=false}}if($("#loading_parent").length==0){$('<div id="loading_parent"></div>').prependTo("body")}ajax_message_count++;$("span.ajax_notification[id^=ajax_message_num]").remove();var a=$('<span class="ajax_notification" id="ajax_message_num_'+ajax_message_count+'"></span>').hide().appendTo("#loading_parent").html(c).show();if(b){a.delay(d).fadeOut("medium",function(){if($(this).is(".dismissable")){$(this).tooltip("destroy")}$(this).remove()})}if(e){a.addClass("dismissable").css("cursor","pointer");PMA_tooltip(a,"span",PMA_messages.strDismiss)}return a}function PMA_ajaxRemoveMessage(a){if(a!=undefined&&a instanceof jQuery){a.stop(true,true).fadeOut("medium");if(a.is(".dismissable")){if($.isFunction(a.tooltip)){a.tooltip("destroy")}}else{a.remove()}}}$(function(){$("span.ajax_notification.dismissable").live("click",function(){PMA_ajaxRemoveMessage($(this))});$("span.ajax_notification a, span.ajax_notification button, span.ajax_notification input").live("mouseover",function(){$(this).parents("span.ajax_notification").tooltip("disable")}).live("mouseout",function(){$(this).parents("span.ajax_notification").tooltip("enable")})});function PMA_showNoticeForEnum(a){var b=a.attr("id").split("_")[1];b+="_"+(parseInt(a.attr("id").split("_")[2])+1);var c=a.val();if(c=="ENUM"||c=="SET"){$("p#enum_notice_"+b).show()}else{$("p#enum_notice_"+b).hide()}}function PMA_createProfilingChartJqplot(b,a){return $.jqplot(b,[a],{seriesDefaults:{renderer:$.jqplot.PieRenderer,rendererOptions:{showDataLabels:true}},legend:{show:true,location:"e"},seriesColors:["#fce94f","#fcaf3e","#e9b96e","#8ae234","#729fcf","#ad7fa8","#ef2929","#eeeeec","#888a85","#c4a000","#ce5c00","#8f5902","#4e9a06","#204a87","#5c3566","#a40000","#babdb6","#2e3436"]})}function PMA_prettyProfilingNum(a,b){if(!b){b=2}b=Math.pow(10,b);if(a*1000<0.1){a=Math.round(b*(a*1000*1000))/b+"Âµ"}else{if(a<0.1){a=Math.round(b*(a*1000))/b+"m"}else{a=Math.round(b*a)/b}}return a+"s"}function PMA_SQLPrettyPrint(a){if(typeof CodeMirror=="undefined"){return a}var l=CodeMirror.getMode({},"text/x-mysql");var e=new CodeMirror.StringStream(a);var d=l.startState();var g,m=[];var h="";var t=function(y){var w="";for(var x=0;x<4*y;x++){w+=" "}return w};var u={select:["select","from","on","where","having","limit","order by","group by"],update:["update","set","where"],"insert into":["insert into","values"]};var k={";":true,",":true,".":true,"(":true};var n={".":true};var o="";while(!e.eol()){e.start=e.pos;g=l.token(e,d);if(g!=null){m.push([g,e.current().toLowerCase()])}}var q=m[0][1];if(!u[q]){return a}var s=[];var f;var b,c;var p=0;var j,v=u[q][0];s.unshift("statement");for(var r=0;r<m.length;r++){f=s[0];if(m[r][1]=="("){if(r<m.length-1&&m[r+1][0]=="statement-verb"){s.unshift(b="statement")}else{if(r>0&&m[r-1][0]=="builtin"){s.unshift(b="function")}else{s.unshift(b="generic")}}}else{b=null}if(m[r][1]==")"){c=s[0];s.shift()}else{c=null}if(r>0&&b=="statement"){p++;h+="\n"+t(p)+m[r][1]+" "+m[r+1][1].toUpperCase()+"\n"+t(p+1);q=m[r+1][1];r++;continue}if(c=="statement"&&p>0){h+="\n"+t(p);p--}j=u[q].indexOf(m[r][1]);if(j!=-1){if(r>0){h+="\n"}h+=t(p)+m[r][1].toUpperCase();h+="\n"+t(p+1);v=m[r][1]}else{if(!k[m[r][1]]&&!(r>0&&n[m[r-1][1]])&&h.charAt(h.length-1)!=" "){h+=" "}if(m[r][0]=="keyword"){h+=m[r][1].toUpperCase()}else{h+=m[r][1]}}if((v=="select"||v=="where"||v=="set")&&m[r][1]==","&&s[0]=="statement"){h+="\n"+t(p+1)}if(v=="where"&&(m[r][1]=="and"||m[r][1]=="or"||m[r][1]=="xor")){if(s[0]=="statement"){h+="\n"+t(p+1)}}}return h}jQuery.fn.PMA_confirm=function(b,d,a){var e=PMA_commonParams.get("confirm");if(e===""||e==="1"){if($.isFunction(a)){a.call(this,d);return true}}if(PMA_messages.strDoYouReally==""){return true}var c={};c[PMA_messages.strOK]=function(){$(this).dialog("close");if($.isFunction(a)){a.call(this,d)}};c[PMA_messages.strCancel]=function(){$(this).dialog("close")};$("<div/>",{id:"confirm_dialog"}).prepend(b).dialog({buttons:c,close:function(){$(this).remove()},modal:true})};jQuery.fn.PMA_sort_table=function(a){return this.each(function(){var c=$(this);var b=$(this).find("tr").get();$.each(b,function(d,e){e.sortKey=$.trim($(e).find(a).text().toLowerCase())});b.sort(function(e,d){if(e.sortKey<d.sortKey){return -1}if(e.sortKey>d.sortKey){return 1}return 0});$.each(b,function(d,e){$(c).append(e);e.sortKey=null});$(this).find("tr:odd").removeClass("even").addClass("odd").end().find("tr:even").removeClass("odd").addClass("even")})};AJAX.registerTeardown("functions.js",function(){$("#create_table_form_minimal.ajax").die("submit");$("form.create_table_form.ajax").die("submit");$("form.create_table_form.ajax input[name=submit_num_fields]").die("click");$("form.create_table_form.ajax input").die("keyup")});AJAX.registerOnload("functions.js",function(){$("form.create_table_form.ajax").live("submit",function(b){b.preventDefault();var a=$(this);if(checkTableEditForm(a[0],a.find("input[name=orig_num_fields]").val())){PMA_ajaxShowMessage(PMA_messages.strProcessingRequest);PMA_prepareForAjaxRequest(a);$.post(a.attr("action"),a.serialize()+"&do_save_data=1",function(i){if(i.success==true){$("#properties_message").removeClass("error").html("");PMA_ajaxShowMessage(i.message);if($("#create_table_dialog").length>0){$("#create_table_dialog").dialog("close").remove()}$("#tableslistcontainer").before(i.formatted_sql);var f=$("#tablesForm").find("tbody").not("#tbl_summary_row");if(f.length==0){PMA_commonActions.refreshMain(PMA_commonParams.get("opendb_url"))}else{var h=$(f).find("tr:last");var g=$(h).find("input:checkbox").attr("id").match(/\d+/)[0];var d=parseFloat(g);var c=d+1;var e="checkbox_tbl_"+c;i.new_table_string=i.new_table_string.replace(/checkbox_tbl_/,e);$(i.new_table_string).appendTo(f);$(f).PMA_sort_table("th");PMA_adjustTotals()}PMA_reloadNavigation()}else{PMA_ajaxShowMessage('<div class="error">'+i.error+"</div>",false)}})}});$("form.create_table_form.ajax input[name=submit_num_fields]").live("click",function(b){b.preventDefault();var a=$(this).closest("form");var c=PMA_ajaxShowMessage(PMA_messages.strProcessingRequest);PMA_prepareForAjaxRequest(a);$.post(a.attr("action"),a.serialize()+"&submit_num_fields=1",function(d){if(d.success){$("#page_content").html(d.message);PMA_verifyColumnsProperties();PMA_ajaxRemoveMessage(c)}else{PMA_ajaxShowMessage(d.error)}})});$("form.create_table_form.ajax input").live("keydown",function(a){if(a.keyCode==13){a.preventDefault();a.stopImmediatePropagation();$(this).closest("form").append('<input type="hidden" name="do_save_data" value="1" />').submit()}})});AJAX.registerTeardown("functions.js",function(){$("#copyTable.ajax").die("submit");$("#moveTableForm").die("submit");$("#tableOptionsForm").die("submit");$("#tbl_maintenance li a.maintain_action.ajax").die("click")});AJAX.registerOnload("functions.js",function(){$("#copyTable.ajax").live("submit",function(b){b.preventDefault();var a=$(this);PMA_prepareForAjaxRequest(a);$.post(a.attr("action"),a.serialize()+"&submit_copy=Go",function(c){if(c.success==true){if(a.find("input[name='switch_to_new']").prop("checked")){PMA_commonParams.set("db",c.db);PMA_commonParams.set("table",a.find("input[name='new_name']").val());PMA_commonActions.refreshMain(false,function(){PMA_ajaxShowMessage(c.message)})}else{PMA_ajaxShowMessage(c.message)}PMA_reloadNavigation()}else{PMA_ajaxShowMessage(c.error,false)}})});$("#moveTableForm").live("submit",function(c){c.preventDefault();var b=$(this);var a=b.find("select[name=target_db]").val();var d=b.find("input[name=new_name]").val();PMA_prepareForAjaxRequest(b);$.post(b.attr("action"),b.serialize()+"&submit_move=1",function(e){if(e.success==true){PMA_commonParams.set("db",a);PMA_commonParams.set("table",d);PMA_commonActions.refreshMain(false,function(){PMA_ajaxShowMessage(e.message)});PMA_reloadNavigation()}else{PMA_ajaxShowMessage(e.error,false)}})});$("#tableOptionsForm").live("submit",function(c){c.preventDefault();c.stopPropagation();var b=$(this);var a=b.find("input[name=new_name]");if(a.val()!==a[0].defaultValue){PMA_prepareForAjaxRequest(b);var d=a.val();$.post(b.attr("action"),b.serialize(),function(e){if(e.success==true){PMA_commonParams.set("table",d);PMA_commonActions.refreshMain(false,function(){$("#page_content").html(e.message)})}else{PMA_ajaxShowMessage(e.error,false)}})}else{b.removeClass("ajax").submit().addClass("ajax")}});$("#tbl_maintenance li a.maintain_action.ajax").live("click",function(a){a.preventDefault();if($("#sqlqueryresults").length!=0){$("#sqlqueryresults").remove()}if($("#result_query").length!=0){$("#result_query").remove()}$.post($(this).attr("href"),{ajax_request:1},function(f){function d(){$("html, body").animate({scrollTop:0})}if(f.success==true&&f.sql_query!=undefined){PMA_ajaxShowMessage(f.message);$("<div id='sqlqueryresults' class='ajax'></div>").prependTo("#page_content");$("#sqlqueryresults").html(f.sql_query);d()}else{if(f.success==true){var c=$("<div id='temp_div'></div>");c.html(f.message);var e=c.find("#result_query .success");PMA_ajaxShowMessage(e);$("<div id='sqlqueryresults' class='ajax'></div>").prependTo("#page_content");$("#sqlqueryresults").html(f.message);PMA_init_slider();$("#sqlqueryresults").children("fieldset,br").remove();d()}else{var c=$("<div id='temp_div'></div>");c.html(f.error);var b=c.find("code").addClass("error");PMA_ajaxShowMessage(b,false)}}})})});AJAX.registerTeardown("functions.js",function(){$("#drop_db_anchor.ajax").die("click")});AJAX.registerOnload("functions.js",function(){$("#drop_db_anchor.ajax").live("click",function(b){b.preventDefault();var a=PMA_messages.strDropDatabaseStrongWarning+" ";a+=$.sprintf(PMA_messages.strDoYouReally,"DROP DATABASE "+escapeHtml(PMA_commonParams.get("db")));$(this).PMA_confirm(a,$(this).attr("href"),function(c){PMA_ajaxShowMessage(PMA_messages.strProcessingRequest);$.get(c,{is_js_confirmed:"1",ajax_request:true},function(d){if(d.success){PMA_reloadNavigation();PMA_commonParams.set("db","");PMA_commonActions.refreshMain("server_databases.php",function(){PMA_ajaxShowMessage(d.message)})}else{PMA_ajaxShowMessage(d.error,false)}})})})});function PMA_checkPassword(e){if(e.find("#nopass_1").is(":checked")){return true}else{var d=e.find("#select_pred_password");if(d.length&&(d.val()=="none"||d.val()=="keep")){return true}}var a=e.find("input[name=pma_pw]");var c=e.find("input[name=pma_pw2]");var b=false;if(a.val()==""){b=PMA_messages.strPasswordEmpty}else{if(a.val()!=c.val()){b=PMA_messages.strPasswordNotSame}}if(b){alert(b);a.val("");c.val("");a.focus();return false}return true}AJAX.registerTeardown("functions.js",function(){$("#change_password_anchor.ajax").die("click")});AJAX.registerOnload("functions.js",function(){$("#change_password_anchor.ajax").live("click",function(b){b.preventDefault();var c=PMA_ajaxShowMessage();var a={};a[PMA_messages.strGo]=function(){b.preventDefault();var f=$("#change_password_form");if(!PMA_checkPassword(f)){return false}var d=$(this).val();var e=PMA_ajaxShowMessage(PMA_messages.strProcessingRequest);f.append('<input type="hidden" name="ajax_request" value="true" />');$.post(f.attr("action"),f.serialize()+"&change_pw="+d,function(g){if(g.success==true){$("#page_content").prepend(g.message);$("#change_password_dialog").hide().remove();$("#edit_user_dialog").dialog("close").remove();PMA_ajaxRemoveMessage(e)}else{PMA_ajaxShowMessage(g.error,false)}})};a[PMA_messages.strCancel]=function(){$(this).dialog("close")};$.get($(this).attr("href"),{ajax_request:true},function(d){if(d.success){$('<div id="change_password_dialog"></div>').dialog({title:PMA_messages.strChangePassword,width:600,close:function(e,f){$(this).remove()},buttons:a,modal:true}).append(d.message);$("fieldset#fieldset_change_password").find("legend").remove().end().find("table.noclick").unwrap().addClass("some-margin").find("input#text_pma_pw").focus();displayPasswordGenerateButton();$("#fieldset_change_password_footer").hide();PMA_ajaxRemoveMessage(c);$("#change_password_form").bind("submit",function(f){f.preventDefault();$(this).closest(".ui-dialog").find(".ui-dialog-buttonpane .ui-button").first().click()})}else{PMA_ajaxShowMessage(d.error,false)}})})});AJAX.registerTeardown("functions.js",function(){$("select.column_type").die("change");$("select.default_type").die("change");$("input.allow_null").die("change")});AJAX.registerOnload("functions.js",function(){PMA_verifyColumnsProperties();$("select.column_type").live("change",function(){PMA_showNoticeForEnum($(this))});$("select.default_type").live("change",function(){PMA_hideShowDefaultValue($(this))});$("input.allow_null").live("change",function(){PMA_validateDefaultValue($(this))})});function PMA_verifyColumnsProperties(){$("select.column_type").each(function(){PMA_showNoticeForEnum($(this))});$("select.default_type").each(function(){PMA_hideShowDefaultValue($(this))})}function PMA_hideShowDefaultValue(b){if(b.val()=="USER_DEFINED"){b.siblings(".default_value").show().focus()}else{b.siblings(".default_value").hide();if(b.val()=="NULL"){var a=b.closest("tr").find(".allow_null");a.prop("checked",true)}}}function PMA_validateDefaultValue(b){if(!b.prop("checked")){var a=b.closest("tr").find(".default_type");if(a.val()=="NULL"){a.val("NONE")}}}AJAX.registerTeardown("functions.js",function(){$("a.open_enum_editor").die("click");$("input.add_value").die("click");$("#enum_editor td.drop").die("click")});var $enum_editor_dialog=null;AJAX.registerOnload("functions.js",function(){$("a.open_enum_editor").live("click",function(){var e=$(this).closest("tr").find("input:first").val();if(e.length<1){var m=PMA_messages.enum_newColumnVals}else{var m=PMA_messages.enum_columnVals.replace(/%s/,'"'+decodeURIComponent(e)+'"')}var k=$(this).closest("td").find("input").val();k=$("<div/>").text(k).html();var n=[];var j=false;var o,f,c="";for(var d=0;d<k.length;d++){o=k.charAt(d);f=d==k.length?"":k.charAt(d+1);if(!j&&o=="'"){j=true}else{if(j&&o=="\\"&&f=="\\"){c+="&#92;";d++}else{if(j&&f=="'"&&(o=="'"||o=="\\")){c+="&#39;";d++}else{if(j&&o=="'"){j=false;n.push(c);c=""}else{if(j){c+=o}}}}}}if(c.length>0){n.push(c)}var g="";if(n.length==0){n.push("","","","")}var l=PMA_getImage("b_drop.png");for(var d=0;d<n.length;d++){g+="<tr><td><input type='text' value='"+n[d]+"'/></td><td class='drop'>"+l+"</td></tr>"}var h="<div id='enum_editor'><fieldset><legend>"+m+"</legend><p>"+PMA_getImage("s_notice.png")+PMA_messages.enum_hint+"</p><table class='values'>"+g+"</table></fieldset><fieldset class='tblFooters'><table class='add'><tr><td><div class='slider'></div></td><td><form><div><input type='submit' class='add_value' value='"+$.sprintf(PMA_messages.enum_addValue,1)+"'/></div></form></td></tr></table><input type='hidden' value='"+$(this).closest("td").find("input").attr("id")+"' /></fieldset></div>";var b={};b[PMA_messages.strGo]=function(){var i=[];$(this).find(".values input").each(function(q,s){var r=s.value.replace(/\\/g,"\\\\").replace(/'/g,"''");i.push("'"+r+"'")});var p=$(this).find("input[type='hidden']").val();$("input#"+p).val(i.join(","));$(this).dialog("close")};b[PMA_messages.strClose]=function(){$(this).dialog("close")};var a=parseInt((parseInt($("html").css("font-size"),10)/13)*340,10);if(!a){a=340}$enum_editor_dialog=$(h).dialog({minWidth:a,modal:true,title:PMA_messages.enum_editor,buttons:b,open:function(){$(this).closest(".ui-dialog").find(".ui-dialog-buttonpane button:first").focus()},close:function(){$(this).remove()}});$enum_editor_dialog.find(".slider").slider({animate:true,range:"min",value:1,min:1,max:9,slide:function(i,p){$(this).closest("table").find("input[type=submit]").val($.sprintf(PMA_messages.enum_addValue,p.value))}});$("a.ui-slider-handle").addClass("ui-state-focus");return false});$("input.add_value").live("click",function(a){a.preventDefault();var b=$enum_editor_dialog.find("div.slider").slider("value");while(b--){$enum_editor_dialog.find(".values").append("<tr style='display: none;'><td><input type='text' /></td><td class='drop'>"+PMA_getImage("b_drop.png")+"</td></tr>").find("tr:last").show("fast")}});$("#enum_editor td.drop").live("click",function(){$(this).closest("tr").hide("fast",function(){$(this).remove()})})});function checkIndexName(b){if($("#"+b).length==0){return false}var a=$("#input_index_name");var c=$("#select_index_type");if(c.find("option:selected").val()=="PRIMARY"){a.val("PRIMARY");a.prop("disabled",true)}else{if(a.val()=="PRIMARY"){a.val("")}a.prop("disabled",false)}return true}AJAX.registerTeardown("functions.js",function(){$("#index_frm input[type=submit]").die("click")});AJAX.registerOnload("functions.js",function(){$("#index_frm input[type=submit]").live("click",function(a){a.preventDefault();var b=$(this).closest("fieldset").find(".slider").slider("value");while(b--){var c=$("#index_columns").find("tbody > tr:first").clone().appendTo($("#index_columns").find("tbody"));c.find(":input").each(function(){$(this).val("")});c.find("select").change(function(){if($(this).find("option:selected").val()==""){return true}$(this).closest("tr").find("input").focus()})}})});function indexEditorDialog(d,g,f,b){if($("#edit_index_dialog").length!=0){$("#edit_index_dialog").remove()}var a=$('<div id="edit_index_dialog"></div>');var c={};c[PMA_messages.strGo]=function(){var h=$("#index_frm");PMA_prepareForAjaxRequest(h);$.post(h.attr("action"),h.serialize()+"&do_save_data=1",function(k){if($("#sqlqueryresults").length!=0){$("#sqlqueryresults").remove()}if(k.success==true){PMA_ajaxShowMessage(k.message);if($("#result_query").length){$("#result_query").remove()}if(k.sql_query){$('<div id="result_query"></div>').html(k.sql_query).prependTo("#page_content")}$("#result_query .notice").remove();$("#result_query").prepend(k.message);$("#table_index").remove();var j=$("<div id='temp_div'><div>").append(k.index_table);j.find("#table_index").insertAfter("#index_header");if($("#edit_index_dialog").length>0){$("#edit_index_dialog").dialog("close")}$("div.no_indexes_defined").hide();if(f){f()}PMA_reloadNavigation()}else{var j=$("<div id='temp_div'><div>").append(k.error);if(j.find(".error code").length!=0){var i=j.find(".error code").addClass("error")}else{var i=j}if(b){b()}PMA_ajaxShowMessage(i,false)}})};c[PMA_messages.strCancel]=function(){$(this).dialog("close")};var e=PMA_ajaxShowMessage();$.get("tbl_indexes.php",d,function(i){if(i.success==false){PMA_ajaxShowMessage(i.error,false)}else{PMA_ajaxRemoveMessage(e);a.append(i.message).dialog({title:g,width:450,open:PMA_verifyColumnsProperties,modal:true,buttons:c,close:function(){$(this).remove()}});checkIndexType();checkIndexName("index_frm");PMA_showHints(a);a.find(".slider").slider({animate:true,value:1,min:1,max:16,slide:function(j,k){$(this).closest("fieldset").find("input[type=submit]").val($.sprintf(PMA_messages.strAddToIndex,k.value))}});a.find("table#index_columns select").change(function(){if($(this).find("option:selected").val()==""){return true}$(this).closest("tr").find("input").focus()});$("a.ui-slider-handle").addClass("ui-state-focus");var h=a.find("input#input_index_name");h.val()||h.focus()}})}function PMA_showHints(a){if(a==undefined||!a instanceof jQuery||a.length==0){a=$("body")}a.find(".pma_hint").each(function(){PMA_tooltip($(this).children("img"),"img",$(this).children("span").html())})}AJAX.registerOnload("functions.js",function(){PMA_showHints()});function PMA_mainMenuResizerCallback(){return $(document.body).width()-5}$(function(){$("#topmenu").menuResizer(PMA_mainMenuResizerCallback);$(window).resize(function(){$("#topmenu").menuResizer("resize")})});function PMA_getRowNumber(a){return parseInt(a.split(/\s+row_/)[1])}function PMA_set_status_label(a){var b=a.css("display")=="none"?"+ ":"- ";a.closest(".slide-wrapper").prev().find("span").text(b)}var toggleButton=function($obj){if($("span.text_direction",$obj).text()=="ltr"){var right="right"}else{var right="left"}var h=$obj.height();$("img",$obj).height(h);$("table",$obj).css("bottom",h-1);var on=$("td.toggleOn",$obj).width();var off=$("td.toggleOff",$obj).width();$("td.toggleOn > div",$obj).width(Math.max(on,off)+2);$("td.toggleOff > div",$obj).width(Math.max(on,off)+2);var w=parseInt(($("img",$obj).height()/16)*22,10);$("table td:nth-child(2) > div",$obj).width(w);var imgw=$("img",$obj).width();var tblw=$("table",$obj).width();var offset=parseInt(((imgw-tblw)/2),10);$obj.find("img").css(right,offset);var offw=$("td.toggleOff",$obj).outerWidth();var btnw=$("table td:nth-child(2)",$obj).outerWidth();$obj.width(offw+btnw+2);var move=$("td.toggleOff",$obj).outerWidth();if($("div.container",$obj).hasClass("off")){if(right=="right"){$("div.container",$obj).animate({left:"-="+move+"px"},0)}else{$("div.container",$obj).animate({left:"+="+move+"px"},0)}}$("div.container",$obj).click(function(){if($(this).hasClass("isActive")){return false}else{$(this).addClass("isActive")}var $msg=PMA_ajaxShowMessage();var $container=$(this);var callback=$("span.callback",this).text();if($(this).hasClass("on")){if(right=="right"){var operator="-="}else{var operator="+="}var url=$(this).find("td.toggleOff > span").text();var removeClass="on";var addClass="off"}else{if(right=="right"){var operator="+="}else{var operator="-="}var url=$(this).find("td.toggleOn > span").text();var removeClass="off";var addClass="on"}$.post(url,{ajax_request:true},function(data){if(data.success==true){PMA_ajaxRemoveMessage($msg);$container.removeClass(removeClass).addClass(addClass).animate({left:operator+move+"px"},function(){$container.removeClass("isActive")});eval(callback)}else{PMA_ajaxShowMessage(data.error,false);$container.removeClass("isActive")}})})};AJAX.registerTeardown("functions.js",function(){$("div.container").unbind("click")});AJAX.registerOnload("functions.js",function(){$("div.toggleAjax").each(function(){var a=$(this).show();a.find("img").each(function(){if(this.complete){toggleButton(a)}else{$(this).load(function(){toggleButton(a)})}})})});AJAX.registerTeardown("functions.js",function(){$(".vpointer").die("hover");$(".vmarker").die("click");$("#pageselector").die("change");$("a.formLinkSubmit").die("click");$("#update_recent_tables").unbind("ready")});AJAX.registerOnload("functions.js",function(){$(".vpointer").live("hover",function(c){var a=$(this);var b=PMA_getRowNumber(a.attr("class"));$(".vpointer").filter(".row_"+b).toggleClass("hover")});$(".vmarker").live("click",function(f){if($(f.target).is("a, img, a *")){return}var c=$(this);var d=PMA_getRowNumber(c.attr("class"));var a=$(".vmarker").filter(".row_"+d+":first").find(":checkbox");if(a.length){var b=a.prop("checked");if(!$(f.target).is(":checkbox, label")){b=!b;a.prop("checked",b)}if(b){$(".vmarker").filter(".row_"+d).addClass("marked")}else{$(".vmarker").filter(".row_"+d).removeClass("marked")}}else{$(".vmarker").filter(".row_"+d).toggleClass("marked")}});$("select.pageselector").live("change",function(a){a.stopPropagation();if($(this).closest("#pma_navigation").length==0){$(this).closest("form").submit()}else{PMA_navigationTreePagination($(this))}});if($("li.jsversioncheck").length>0){$.getJSON("version_check.php",{},PMA_current_version)}if($("#is_git_revision").length>0){setTimeout(PMA_display_git_revision,10)}PMA_init_slider();$("a.formLinkSubmit").live("click",function(b){if($(this).attr("href").indexOf("=")!=-1){var a=$(this).attr("href").substr($(this).attr("href").indexOf("#")+1).split("=",2);$(this).parents("form").append('<input type="hidden" name="'+a[0]+'" value="'+a[1]+'"/>')}$(this).parents("form").submit();return false});if($("#update_recent_tables").length){$.get($("#update_recent_tables").attr("href"),function(a){if(a.success==true){$("#recentTable").html(a.options)}})}});function PMA_init_slider(){$("div.pma_auto_slider").each(function(){var b=$(this);if(b.data("slider_init_done")){return}var a=$("<div>",{"class":"slide-wrapper"});a.toggle(b.is(":visible"));$("<a>",{href:"#"+this.id,"class":"ajax"}).text(this.title).prepend($("<span>")).insertBefore(b).click(function(){var c=b.closest(".slide-wrapper");var d=b.is(":visible");if(!d){c.show()}b[d?"hide":"show"]("blind",function(){c.toggle(!d);PMA_set_status_label(b)});return false});b.wrap(a);PMA_set_status_label(b);b.data("slider_init_done",1)})}AJAX.registerOnload("functions.js",function(){PMA_init_slider()});AJAX.registerTeardown("functions.js",function(){$("div.pma_auto_slider").each(function(){var a=$(this);a.removeData();a.parent().replaceWith(a);a.parent().children("a").remove()})});function PMA_slidingMessage(b,c){if(b==undefined||b.length==0){return false}if(c==undefined||!c instanceof jQuery||c.length==0){if($("#PMA_slidingMessage").length==0){$("#page_content").prepend('<span id="PMA_slidingMessage" style="display: inline-block;"></span>')}c=$("#PMA_slidingMessage")}if(c.has("div").length>0){c.find("div").first().fadeOut(function(){c.children().remove();c.append('<div style="display: none;">'+b+"</div>").animate({height:c.find("div").first().height()}).find("div").first().fadeIn()})}else{var a=c.width("100%").html('<div style="display: none;">'+b+"</div>").find("div").first().height();c.find("div").first().css("height",0).show().animate({height:a},function(){c.height(c.find("div").first().height())})}return true}AJAX.registerTeardown("functions.js",function(){$("#drop_tbl_anchor.ajax").die("click");$("#truncate_tbl_anchor.ajax").die("click")});AJAX.registerOnload("functions.js",function(){$("#drop_tbl_anchor.ajax").live("click",function(b){b.preventDefault();var a=PMA_messages.strDropTableStrongWarning+" ";a+=$.sprintf(PMA_messages.strDoYouReally,"DROP TABLE "+PMA_commonParams.get("table"));$(this).PMA_confirm(a,$(this).attr("href"),function(c){var d=PMA_ajaxShowMessage(PMA_messages.strProcessingRequest);$.get(c,{is_js_confirmed:"1",ajax_request:true},function(e){if(e.success==true){PMA_ajaxRemoveMessage(d);PMA_reloadNavigation();PMA_commonParams.set("table","");PMA_commonActions.refreshMain(PMA_commonParams.get("opendb_url"),function(){PMA_ajaxShowMessage(e.message)})}else{PMA_ajaxShowMessage(e.error,false)}})})});$("#truncate_tbl_anchor.ajax").live("click",function(b){b.preventDefault();var a=PMA_messages.strTruncateTableStrongWarning+" ";a+=$.sprintf(PMA_messages.strDoYouReally,"TRUNCATE "+PMA_commonParams.get("table"));$(this).PMA_confirm(a,$(this).attr("href"),function(c){PMA_ajaxShowMessage(PMA_messages.strProcessingRequest);$.get(c,{is_js_confirmed:"1",ajax_request:true},function(d){if($("#sqlqueryresults").length!=0){$("#sqlqueryresults").remove()}if($("#result_query").length!=0){$("#result_query").remove()}if(d.success==true){PMA_ajaxShowMessage(d.message);$("<div id='sqlqueryresults'></div>").prependTo("#page_content");$("#sqlqueryresults").html(d.sql_query)}else{PMA_ajaxShowMessage(d.error,false)}})})})});AJAX.registerOnload("functions.js",function(){var a=$("#sqlquery");if(a.length>0){if(typeof CodeMirror!="undefined"){codemirror_editor=CodeMirror.fromTextArea(a[0],{lineNumbers:true,matchBrackets:true,indentUnit:4,mode:"text/x-mysql",lineWrapping:true});codemirror_editor.focus();$(codemirror_editor.getWrapperElement()).bind("keydown",catchKeypressesFromSqlTextboxes)}else{a.focus().bind("keydown",catchKeypressesFromSqlTextboxes)}}});AJAX.registerTeardown("functions.js",function(){if(codemirror_editor){$("#sqlquery").text(codemirror_editor.getValue());codemirror_editor.toTextArea();codemirror_editor=false}});(function(a){a.fn.noSelect=function(c){var b=(c==null)?true:c;if(b){return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).bind("selectstart",function(){return false})}else{if(a.browser.mozilla){a(this).css("MozUserSelect","none");a("body").trigger("focus")}else{if(a.browser.opera){a(this).bind("mousedown",function(){return false})}else{a(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).unbind("selectstart")}else{if(a.browser.mozilla){a(this).css("MozUserSelect","inherit")}else{if(a.browser.opera){a(this).unbind("mousedown")}else{a(this).removeAttr("unselectable")}}}})}}})(jQuery);(function(a){a.fn.filterByValue=function(b){return this.filter(function(){return a(this).val()===b})}})(jQuery);function PMA_tooltip(d,e,c,b){if($("#no_hint").length>0){return}var a={content:c,items:e,tooltipClass:"tooltip",track:true,show:false,hide:false};d.tooltip($.extend(true,a,b))}function PMA_getCellValue(b){var a=$(b);if(a.is(".null")){return""}else{if(!a.is(".to_be_saved")&&a.data("original_data")){return a.data("original_data")}else{return a.text()}}}AJAX.registerTeardown("functions.js",function(){$("a.themeselect").die("click");$(".autosubmit").die("change");$("a.take_theme").unbind("click")});AJAX.registerOnload("functions.js",function(){$("a.themeselect").live("click",function(a){window.open(a.target,"themes","left=10,top=20,width=510,height=350,scrollbars=yes,status=yes,resizable=yes");return false});$(".autosubmit").live("change",function(a){$(this).closest("form").submit()});$("a.take_theme").click(function(b){var a=this.name;if(window.opener&&window.opener.document.forms.setTheme.elements.set_theme){window.opener.document.forms.setTheme.elements.set_theme.value=a;window.opener.document.forms.setTheme.submit();window.close();return false}return true})});function PMA_clearSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var a=window.getSelection();if(a.empty){a.empty()}if(a.removeAllRanges){a.removeAllRanges()}}}}function escapeHtml(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function printPage(){if(typeof(window.print)!="undefined"){window.print()}}AJAX.registerTeardown("functions.js",function(){$("input#print").unbind("click");$("span a.create_view.ajax").die("click");$("#createViewDialog").find("input, select").die("keydown")});AJAX.registerOnload("functions.js",function(){$("input#print").click(printPage);$("span a.create_view.ajax").live("click",function(a){a.preventDefault();PMA_createViewDialog($(this))});$("#createViewDialog").find("input, select").live("keydown",function(a){if(a.which===13){a.preventDefault();$(this).closest(".ui-dialog").find(".ui-button:first").click()}})});function PMA_createViewDialog(c){var a=PMA_ajaxShowMessage();var b=null;$.get(c.attr("href")+"&ajax_request=1",function(g){if(g.success==true){PMA_ajaxRemoveMessage(a);var h={};h[PMA_messages.strGo]=function(){if(typeof CodeMirror!=="undefined"){b.save()}a=PMA_ajaxShowMessage();$.get("view_create.php",$("#createViewDialog").find("form").serialize(),function(i){PMA_ajaxRemoveMessage(a);if(i.success===true){$("#createViewDialog").dialog("close");$("#result_query").html(i.message);PMA_reloadNavigation()}else{PMA_ajaxShowMessage(i.error,false)}})};h[PMA_messages.strClose]=function(){$(this).dialog("close")};var f=$("<div/>").attr("id","createViewDialog").append(g.message).dialog({width:500,minWidth:300,maxWidth:620,modal:true,buttons:h,title:$("legend",$(g.message)).html(),close:function(){$(this).remove()}});f.find("legend").remove();if(typeof CodeMirror!=="undefined"){var d=f.find("textarea");var e={lineNumbers:true,matchBrackets:true,indentUnit:4,mode:"text/x-mysql"};b=CodeMirror.fromTextArea(d[0],e)}$("input:visible[type=text]",f).first().focus()}else{PMA_ajaxShowMessage(g.error)}})}$(function(){if($("#floating_menubar").length&&$("#PMA_disable_floating_menubar").length==0){var a=$("html").attr("dir")=="ltr"?"left":"right";$("#floating_menubar").css("margin-"+a,$("#pma_navigation").width()+$("#pma_navigation_resizer").width()).css(a,0).css({position:"fixed",top:0,width:"100%","z-index":500}).append($("#serverinfo")).append($("#topmenucontainer"));setTimeout(function(){$("body").css("padding-top",$("#floating_menubar").outerHeight(true));$("#topmenu").menuResizer("resize")},4)}});$(function(){$(document).delegate("#serverinfo, #goto_pagetop","click",function(a){a.preventDefault();$("html, body").animate({scrollTop:0},"fast")})});var checkboxes_sel="input.checkall:checkbox:enabled";$(checkboxes_sel).live("change",function(){var a=$(this.form);var c=a.find(checkboxes_sel).length;var d=a.find(checkboxes_sel+":checked").length;var b=a.find("input#checkall");if(c==d){b.prop({checked:true,indeterminate:false})}else{if(d>0){b.prop({checked:true,indeterminate:true})}else{b.prop({checked:false,indeterminate:false})}}});$("input#checkall").live("change",function(){var a=$(this).is(":checked");$(this.form).find(checkboxes_sel).prop("checked",a).parents("tr").toggleClass("marked",a)});function toggleRowColors(b){for(var a=b;a.length>0;a=a.next()){if(a.hasClass("odd")){a.removeClass("odd").addClass("even")}else{if(a.hasClass("even")){a.removeClass("even").addClass("odd")}}}}function formatBytes(b,f,a){if(!f){var f=0}if(!a){var a="."}var c=["B","KiB","MiB","GiB"];for(var e=0;b>1024&&e<c.length;e++){b/=1024}var d=Math.pow(10,f);b=Math.round(b*d)/d;b=b.toString().split(".").join(a);return b+" "+c[e]}AJAX.registerOnload("functions.js",function(){$("a._blank").prop("target","_blank");var a=$("#loginform");if(a.length){a.find(".js-show").show();if($("#input_username").val()){$("#input_password").focus()}else{$("#input_username").focus()}}});$("a.login-link").live("click",function(a){a.preventDefault();window.location.reload(true)});